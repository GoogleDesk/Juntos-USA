<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ApoyoYA — Clear information and nearby help</title>

    <!-- Tailwind (no build step) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: { extend: {} },
        corePlugins: { preflight: true }
      };
    </script>

    <!-- React 18 UMD + Babel (for in-browser JSX) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      html, body, #root { height: 100%; }
      body { background: #fff; color: #0f172a; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useMemo, useState, useContext, createContext, useEffect } = React;

      // i18n context
      const SUPPORTED_LANGS = ["es", "en"];
      const LangCtx = createContext({ lang: "es", setLang: () => {} });
      const useI18n = () => useContext(LangCtx);

      const COPY = {
        es: {
          brand: "Apoyo a Inmigrantes",
          nav: { derechos: "Conozca Sus Derechos", buscador: "Recursos Legales Cercanos", red: "Apoyo Mutuo Cercano", edu: "Centro Educativo" },
          hero: {
            title: "Información clara y ayuda cercana, en español e inglés",
            body: "Recursos confiables para conocer sus derechos, encontrar ayuda legal, ubicar centros de apoyo mutuo y aprender con videos cortos.",
            ctaPrimary: "Ver derechos ahora",
            ctaSecondary: "Recursos legales cercanos",
            disclaimer: "Esta información es educativa; no es asesoría legal.",
            listTitle: "Comience con estos 3 pasos",
            list1: "Guarde la tarjeta de derechos en su teléfono.",
            list2: "Anote un contacto de emergencia.",
            list3: "Identifique ayuda legal cercana."
          },
          sections: {
            kyrTitle: "Conozca Sus Derechos",
            kyrSub: "Videos breves, guías descargables y pasos claros para situaciones comunes.",
            finderTitle: "Recursos Legales Cercanos",
            finderSub: "Encuentre ayuda legal confiable por zona y categoría.",
            mutualTitle: "Apoyo Mutuo Cercano",
            mutualSub: "Mapa de centros confiables cercanos (bancos de alimentos, clases de inglés, refugios).",
            eduTitle: "Centro Educativo (Videos)",
            eduSub: "Aprenda con videos breves y materiales descargables."
          },
          sectionDescs: {
            kyr: "Videos cortos y guías simples para actuar con calma.",
            finder: "Organizaciones y abogados confiables cerca de usted.",
            mutual: "Centros de apoyo comunitario en su área.",
            edu: "Aprenda sobre trabajo, salud, escuela y más."
          },
          labels: {
            langToggle: "Cambiar a inglés", langToggleAlt: "Cambiar a español",
            zipcode: "Código postal", category: "Categoría", proBonoOnly: "Solo pro bono",
            noResults: "No hay resultados. Pruebe otra categoría o amplíe el área.",
            mapNote: "Nota: este mapa es un ejemplo.",
            mapPlaceholder: "Mapa (banco de alimentos)",
            call: "Llamar", website: "Sitio web",
            chatOpen: "Chat de ayuda (GPT-5)", chatTitle: "Asistente (educativo)",
            chatDisclaimer: "Respuestas educativas; no es asesoría legal.",
            chatPlaceholder: "Escriba su pregunta…", chatSend: "Enviar", chatClose: "Cerrar", chatPoweredBy: "Impulsado por GPT-5",
            runTests: "Probar UI", testsPassing: "Pruebas OK", testsFailing: "Pruebas fallan",
            subtitles: "Subtítulos", play: "Reproducir", downloads: "Descargables", checklist: "Lista (PDF)", glossary: "Glosario (PDF)"
          }
        },
        en: {
          brand: "Immigrant Support",
          nav: { derechos: "Know Your Rights", buscador: "Legal Resources Nearby", red: "Mutual Aid Nearby", edu: "Education Hub" },
          hero: {
            title: "Clear information and nearby help, in Spanish & English",
            body: "Trusted resources to learn your rights, find legal help, locate mutual-aid centers, and learn with short videos.",
            ctaPrimary: "View rights now",
            ctaSecondary: "Legal resources nearby",
            disclaimer: "This information is educational and not legal advice.",
            listTitle: "Start with these 3 steps",
            list1: "Save the rights card to your phone.",
            list2: "Write down an emergency contact.",
            list3: "Identify nearby legal help."
          },
          sections: {
            kyrTitle: "Know Your Rights",
            kyrSub: "Short videos, downloadable guides, and clear steps for common situations.",
            finderTitle: "Legal Resources Nearby",
            finderSub: "Find trustworthy legal help by area and category.",
            mutualTitle: "Mutual Aid Nearby",
            mutualSub: "Map of trusted local centers (food banks, ESL classes, shelters).",
            eduTitle: "Education Hub (Videos)",
            eduSub: "Learn with short videos and downloadable materials."
          },
          sectionDescs: {
            kyr: "Short videos and simple guides to stay calm and act.",
            finder: "Trusted organizations and attorneys near you.",
            mutual: "Community support centers in your area.",
            edu: "Learn about work, health, school, and more."
          },
          labels: {
            langToggle: "Switch to English", langToggleAlt: "Switch to Spanish",
            zipcode: "ZIP code", category: "Category", proBonoOnly: "Pro bono only",
            noResults: "No results. Try another category or expand the area.",
            mapNote: "Note: this map is a placeholder.",
            mapPlaceholder: "Map (food bank theme)",
            call: "Call", website: "Website",
            chatOpen: "Chat help (GPT-5)", chatTitle: "Assistant (educational)",
            chatDisclaimer: "Educational responses; not legal advice.",
            chatPlaceholder: "Type your question…", chatSend: "Send", chatClose: "Close", chatPoweredBy: "Powered by GPT-5",
            runTests: "Run UI checks", testsPassing: "Tests passing", testsFailing: "Tests failing",
            subtitles: "Captions", play: "Play", downloads: "Downloads", checklist: "Checklist (PDF)", glossary: "Glossary (PDF)"
          }
        }
      };
      const safeCopy = (lang) => COPY[SUPPORTED_LANGS.includes(lang || "") ? lang : "es"];

      const CATEGORY_LABELS = {
        es: { asilo: "Asilo", daca: "DACA", defensa: "Defensa contra deportación", trabajo: "Trabajo", vivienda: "Vivienda", salud: "Salud" },
        en: { asilo: "Asylum", daca: "DACA", defensa: "Removal defense", trabajo: "Work", vivienda: "Housing", salud: "Health" }
      };
      const CATEGORIES = ["asilo", "daca", "defensa", "trabajo", "vivienda", "salud"];

      // Mock content for the homepage sections (the real finder lives on /finder.html)
      const MOCK_VIDEOS_KYR = [
        { id: "kyr1", title: { es: "Qué hacer si ICE toca a tu puerta", en: "What to do if ICE knocks" }, duration: "1:30", captions: true, thumbnail: "https://images.unsplash.com/photo-1551836022-4c4c79ecde51?q=80&w=1200&auto=format&fit=crop" },
        { id: "kyr2", title: { es: "Tus derechos en un control policial", en: "Your rights at a traffic stop" }, duration: "1:45", captions: true, thumbnail: "https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop" },
        { id: "kyr3", title: { es: "Cómo preparar un plan familiar de emergencia", en: "How to make a family emergency plan" }, duration: "1:20", captions: true, thumbnail: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop" },
        { id: "kyr4", title: { es: "Tarjeta de derechos: cómo usarla", en: "Rights card: how to use it" }, duration: "1:10", captions: true, thumbnail: "https://images.unsplash.com/photo-1531482615713-2afd69097998?q=80&w=1200&auto=format&fit=crop" }
      ];
      const MOCK_RESOURCES = [
        { id: 1, name: "Centro Legal Esperanza", phone: "(404) 555-0199", website: "#", address: "123 Peachtree St, Atlanta, GA", languages: ["es","en"], categories: ["asilo","defensa"], pro_bono: true, wait_days: 5, zip: "30303" },
        { id: 2, name: "Defensa Comunitaria ATL", phone: "(404) 555-0142", website: "#", address: "45 Ponce De Leon Ave, Atlanta, GA", languages: ["es"], categories: ["defensa"], pro_bono: false, wait_days: 2, zip: "30308" }
      ];
      const MOCK_AID = [
        { id: "a1", name: { es: "Banco de Alimentos Midtown", en: "Midtown Food Bank" }, type: { es: "Banco de alimentos", en: "Food bank" }, address: "101 Main St, Atlanta, GA", phone: "(404) 555-0111", zip: "30308" },
        { id: "a2", name: { es: "Clases ESL Clarkston", en: "Clarkston ESL Classes" }, type: { es: "Clases de inglés", en: "ESL classes" }, address: "22 Church St, Clarkston, GA", phone: "(404) 555-0112", zip: "30021" }
      ];
      const MOCK_VIDEOS_EDU = [
        { id: "edu1", title: { es: "Cómo inscribir a tus hijos en la escuela", en: "How to enroll your kids in school" }, duration: "1:40", captions: true, thumbnail: "https://images.unsplash.com/photo-1523246191913-1e7edb1f1a78?q=80&w=1200&auto=format&fit=crop", topic: "escuela" },
        { id: "edu2", title: { es: "Tus derechos laborales básicos", en: "Your basic labor rights" }, duration: "1:55", captions: true, thumbnail: "https://images.unsplash.com/photo-1520607162513-77705c0f0d4a?q=80&w=1200&auto=format&fit=crop", topic: "trabajo" }
      ];

      // robust image w/ fallbacks (fixes your “missing image” case)
      const svgToDataUrl = (svg) => `data:image/svg+xml;utf8,${encodeURIComponent(svg)}`;
      const MUTUAL_SHELVES_SVG = svgToDataUrl(`
        <svg xmlns='http://www.w3.org/2000/svg' width='800' height='400' viewBox='0 0 800 400'>
          <rect x='0' y='0' width='800' height='400' fill='#e6eef6'/>
          <rect x='40' y='90' width='720' height='8' fill='#c4d1df'/>
          <rect x='40' y='180' width='720' height='8' fill='#c4d1df'/>
          <rect x='40' y='270' width='720' height='8' fill='#c4d1df'/>
          <rect x='40' y='60' width='10' height='310' fill='#b6c2cf'/>
          <rect x='750' y='60' width='10' height='310' fill='#b6c2cf'/>
          <g transform='translate(70,105)'>
            <rect width='40' height='60' rx='6' fill='#e76f51'/>
            <rect x='50' width='40' height='60' rx='6' fill='#2a9d8f'/>
            <rect x='100' width='40' height='60' rx='6' fill='#e9c46a'/>
            <rect x='150' width='40' height='60' rx='6' fill='#f4a261'/>
            <rect x='200' width='40' height='60' rx='6' fill='#457b9d'/>
          </g>
        </svg>
      `);

      function MultiSrcImg({ sources, className, alt = "" }) {
        const [i, setI] = useState(0);
        const src = sources[Math.min(i, sources.length - 1)];
        return (
          <img
            src={src}
            alt={alt}
            className={className}
            onError={() => setI((prev) => (prev + 1 < sources.length ? prev + 1 : prev))}
            crossOrigin="anonymous"
            referrerPolicy="no-referrer"
          />
        );
      }

      // small UI atoms
      const Badge = ({ children }) => (
        <span className="inline-flex items-center rounded-full border border-slate-300 px-2 py-0.5 text-xs text-slate-600">{children}</span>
      );
      const Pill = ({ active, children, onClick }) => (
        <button onClick={onClick} className={`rounded-full px-3 py-1 text-sm border transition ${active ? "bg-emerald-600 text-white border-emerald-600" : "bg-white text-slate-700 border-slate-300 hover:border-slate-400"}`}>{children}</button>
      );
      const Card = ({ children }) => (
        <div className="rounded-2xl border border-slate-200 bg-white shadow-sm overflow-hidden">{children}</div>
      );
      const Section = ({ id, title, subtitle, children }) => (
        <section id={id} className="py-10 sm:py-12">
          <div className="mx-auto max-w-6xl px-4">
            <div className="mb-5 sm:mb-6">
              <h2 className="text-2xl sm:text-3xl font-semibold text-slate-900">{title}</h2>
              {subtitle ? <p className="mt-1 text-slate-600 max-w-2xl">{subtitle}</p> : null}
            </div>
            {children}
          </div>
        </section>
      );
      const CTAButton = ({ children, href, onClick, variant = "primary" }) => (
        <a href={href} onClick={onClick} className={variant === "primary" ? "inline-flex items-center justify-center rounded-xl bg-emerald-700 px-4 py-2 text-white font-medium hover:bg-emerald-800 focus:outline-none focus:ring-2 focus:ring-emerald-400" : "inline-flex items-center justify-center rounded-xl border border-slate-300 px-4 py-2 text-slate-800 font-medium hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300"}>{children}</a>
      );

      // Chat UI shell (no backend)
      function ChatWidget({ open, onClose }) {
        const { lang } = useI18n();
        const t = safeCopy(lang).labels;
        const [input, setInput] = useState("");
        const [messages, setMessages] = useState([
          { role: "assistant", text: lang === 'es' ? "Hola, puedo compartir información educativa sobre derechos y recursos locales." : "Hi, I can share educational info about rights and local resources." }
        ]);
        useEffect(() => {
          setMessages([{ role: "assistant", text: lang === 'es' ? "Hola, puedo compartir información educativa sobre derechos y recursos locales." : "Hi, I can share educational info about rights and local resources." }]);
        }, [lang]);
        if (!open) return null;
        const send = () => {
          const val = input.trim(); if (!val) return; setInput("");
          setMessages((m) => [...m, { role: "user", text: val }]);
          const reply = lang === 'es'
            ? "Entendido. Esto es educativo, no asesoría legal. Para ayuda local, use Recursos Legales Cercanos o dígame su código postal."
            : "Got it. This is educational, not legal advice. For local help, try Legal Resources Nearby or tell me your ZIP.";
          setTimeout(() => setMessages((m) => [...m, { role: "assistant", text: reply }]), 250);
        };
        return (
          <div className="fixed bottom-4 right-4 z-50 w-[min(100vw,380px)]">
            <div className="rounded-2xl shadow-xl border border-slate-200 bg-white overflow-hidden">
              <div className="flex items-center justify-between px-3 py-2 bg-slate-900 text-white">
                <div className="text-sm font-medium flex items-center gap-2">
                  <span className="inline-flex items-center rounded-full bg-emerald-600/20 text-emerald-200 border border-emerald-500 px-2 py-0.5 text-[10px]">{t.chatPoweredBy}</span>
                  <span>{t.chatTitle}</span>
                </div>
                <button onClick={onClose} className="text-xs px-2 py-1 rounded hover:bg-white/10">{t.chatClose}</button>
              </div>
              <div className="px-3 py-2 text-[11px] text-slate-600 border-b border-slate-200">{t.chatDisclaimer}</div>
              <div className="h-64 overflow-y-auto p-3 space-y-2">
                {messages.map((m, i) => (
                  <div key={i} className={`max-w-[85%] rounded-xl px-3 py-2 text-sm ${m.role === 'assistant' ? 'bg-slate-100 text-slate-900' : 'bg-emerald-600 text-white ml-auto'}`}>{m.text}</div>
                ))}
              </div>
              <div className="p-2 flex items-center gap-2 border-t border-slate-200">
                <input value={input} onChange={(e) => setInput(e.target.value)} onKeyDown={(e) => { if (e.key === 'Enter') send(); }} placeholder={t.chatPlaceholder} className="flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400" />
                <button onClick={send} className="rounded-lg bg-emerald-700 px-3 py-2 text-sm text-white hover:bg-emerald-800">{t.chatSend}</button>
              </div>
            </div>
          </div>
        );
      }
      function ChatToggleButton({ onClick }) {
        const { lang } = useI18n();
        const t = safeCopy(lang).labels;
        return (
          <button onClick={onClick} className="fixed bottom-4 right-4 z-40 rounded-full shadow-lg bg-slate-900 text-white text-sm pl-4 pr-3 py-2 hover:bg-slate-800 flex items-center gap-2" aria-label={t.chatOpen}>
            <span className="inline-flex h-2.5 w-2.5 rounded-full bg-emerald-400 animate-pulse" />
            <span className="font-medium">{t.chatOpen}</span>
            <span className="ml-1 inline-flex items-center rounded-full border border-emerald-500 text-emerald-200 bg-emerald-600/20 px-2 py-0.5 text-[10px]">GPT-5</span>
          </button>
        );
      }

      // Header
      function Header() {
        const { lang, setLang } = useI18n();
        const t = safeCopy(lang);
        const isES = lang === 'es';
        const toggleText = isES ? COPY.en.labels.langToggle : COPY.es.labels.langToggle;
        return (
          <header className="border-b border-slate-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-40">
            <div className="mx-auto max-w-6xl px-4 h-14 flex items-center gap-3">
              <div className="flex items-center gap-2">
                <div className="h-8 w-8 rounded-xl bg-emerald-700" />
                <span className="font-semibold text-slate-900">{t.brand}</span>
              </div>
              <nav className="ml-6 hidden sm:flex items-center gap-4 text-sm text-slate-700">
                <a href="#kyr" className="hover:text-slate-900">{t.nav.derechos}</a>
                {/* updated: link to separate finder page */}
                <a href="/finder.html" className="hover:text-slate-900">{t.nav.buscador}</a>
                <a href="#mutual" className="hover:text-slate-900">{t.nav.red}</a>
                <a href="#edu" className="hover:text-slate-900">{t.nav.edu}</a>
              </nav>
              <div className="ml-auto flex items-center gap-2">
                <button onClick={() => setLang(isES ? 'en' : 'es')} className="inline-flex items-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-sm text-slate-800 hover:bg-slate-50" aria-label={toggleText}>
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 0 20"/></svg>
                  <span className="font-medium">{toggleText}</span>
                </button>
              </div>
            </div>
          </header>
        );
      }

      // Hero
      function Hero() {
        const { lang } = useI18n();
        const t = safeCopy(lang);
        return (
          <section className="bg-gradient-to-b from-emerald-50 to-white">
            <div className="mx-auto max-w-6xl px-4 pt-6 pb-4 sm:pt-8 sm:pb-6">
              <div className="grid gap-6 sm:grid-cols-2 sm:items-center">
                <div>
                  <h1 className="text-3xl sm:text-4xl font-semibold text-slate-900">{t.hero.title}</h1>
                  <p className="mt-3 text-slate-700 max-w-prose">{t.hero.body}</p>
                  <div className="mt-5 flex flex-wrap gap-3">
                    <CTAButton href="#kyr">{t.hero.ctaPrimary}</CTAButton>
                    {/* updated: link to separate finder page */}
                    <CTAButton href="/finder.html" variant="secondary">{t.hero.ctaSecondary}</CTAButton>
                  </div>
                  <p className="mt-3 text-xs text-slate-500">{t.hero.disclaimer}</p>
                </div>
                <Card>
                  <div className="aspect-[16/9] w-full bg-[url('https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1200&auto=format&fit=crop')] bg-cover bg-center" />
                  <div className="p-4">
                    <h3 className="font-medium text-slate-900">{t.hero.listTitle}</h3>
                    <ol className="mt-3 space-y-2 text-sm text-slate-700">
                      <li>1. {t.hero.list1}</li>
                      <li>2. {t.hero.list2}</li>
                      <li>3. {t.hero.list3}</li>
                    </ol>
                  </div>
                </Card>
              </div>
            </div>
          </section>
        );
      }

      // Pillars
      function PillarCards() {
        const { lang } = useI18n();
        const s = safeCopy(lang).sections; const d = safeCopy(lang).sectionDescs;
        const pillars = [
          { id: "kyr", title: s.kyrTitle, desc: d.kyr, img: "https://images.unsplash.com/photo-1461532257246-777de18cd58b?q=80&w=1200&auto=format&fit=crop" },
          { id: "finder", title: s.finderTitle, desc: d.finder, img: "https://images.unsplash.com/photo-1521791055366-0d553872125f?q=80&w=1200&auto=format&fit=crop" },
          { id: "mutual", title: s.mutualTitle, desc: d.mutual, img: "" },
          { id: "edu", title: s.eduTitle, desc: d.edu, img: "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?q=80&w=1200&auto=format&fit=crop" }
        ];
        return (
          <div className="mx-auto max-w-6xl px-4 -mt-2">
            <div className="grid gap-5 sm:grid-cols-2 lg:grid-cols-4">
              {pillars.map((p) => {
                const href = p.id === "finder" ? "/finder.html" : `#${p.id}`;
                return (
                  <a key={p.id} href={href} className="group block">
                    <Card>
                      <div className="relative">
                        {p.id === 'mutual' ? (
                          <MultiSrcImg
                            sources={[
                              "https://images.unsplash.com/photo-1604909053191-8a9d70e5bc24?q=80&w=1200&auto=format&fit=crop",
                              "https://images.unsplash.com/photo-1506617420156-8e4536971650?q=80&w=1200&auto=format&fit=crop",
                              "https://upload.wikimedia.org/wikipedia/commons/4/4b/Food_pantry_shelves.jpg",
                              MUTUAL_SHELVES_SVG
                            ]}
                            className="w-full h-40 sm:h-36 object-cover"
                            alt="Food pantry shelves"
                          />
                        ) : (
                          <div className="w-full h-40 sm:h-36 bg-cover bg-center" style={{ backgroundImage: `url(${p.img})` }} aria-label={p.title} />
                        )}
                        <div className="absolute inset-x-0 bottom-0 h-14 bg-gradient-to-t from-black/50 to-transparent" />
                      </div>
                      <div className="p-5">
                        <h3 className="font-semibold text-slate-900 text-lg group-hover:underline">{p.title}</h3>
                        <p className="mt-1 text-sm text-slate-600 min-h-[42px]">{p.desc}</p>
                      </div>
                    </Card>
                  </a>
                );
              })}
            </div>
          </div>
        );
      }

      // Simple demo sections (home)
      function VideoCard({ v }) {
        const { lang } = useI18n(); const t = safeCopy(lang);
        return (
          <Card>
            <div className="aspect-video w-full bg-slate-200" style={{ backgroundImage: `url(${v.thumbnail})`, backgroundSize: 'cover', backgroundPosition: 'center' }} />
            <div className="p-4">
              <div className="flex items-center gap-2 text-xs text-slate-600"><Badge>{v.duration}</Badge>{v.captions ? <Badge>{t.labels.subtitles}</Badge> : null}</div>
              <h4 className="mt-2 font-medium text-slate-900 line-clamp-2">{typeof v.title === 'string' ? v.title : (v.title[lang] || v.title.es)}</h4>
              <button className="mt-3 w-full rounded-lg bg-slate-900/90 px-3 py-2 text-sm text-white hover:bg-slate-900">{t.labels.play}</button>
            </div>
          </Card>
        );
      }
      function KYRSection() {
        const { lang } = useI18n(); const t = safeCopy(lang);
        return (
          <Section id="kyr" title={t.sections.kyrTitle} subtitle={t.sections.kyrSub}>
            <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">{MOCK_VIDEOS_KYR.map((v) => <VideoCard key={v.id} v={v} />)}</div>
          </Section>
        );
      }
      function FinderSection() {
        const { lang } = useI18n(); const t = safeCopy(lang);
        const [zip, setZip] = useState(""); const [cat, setCat] = useState(null); const [proBonoOnly, setProBonoOnly] = useState(false);
        const results = useMemo(() => MOCK_RESOURCES.filter((r) => (zip ? r.zip.startsWith(zip) : true) && (cat ? r.categories.includes(cat) : true) && (proBonoOnly ? r.pro_bono : true)), [zip, cat, proBonoOnly]);
        return (
          <Section id="finder" title={t.sections.finderTitle} subtitle={t.sections.finderSub}>
            <div className="rounded-2xl border border-slate-200 bg-white p-4 sm:p-5">
              <div className="flex flex-col sm:flex-row gap-3 sm:items-end">
                <div className="flex-1"><label className="text-sm text-slate-700">{t.labels.zipcode}</label><input value={zip} onChange={(e) => setZip(e.target.value)} inputMode="numeric" placeholder="30303" className="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-400" /></div>
                <div className="flex-1"><label className="text-sm text-slate-700">{t.labels.category}</label><div className="mt-1 flex flex-wrap gap-2">{CATEGORIES.map((id) => (<Pill key={id} active={cat === id} onClick={() => setCat(cat === id ? null : id)}>{CATEGORY_LABELS[(SUPPORTED_LANGS.includes(lang) ? lang : 'es')][id]}</Pill>))}</div></div>
                <div className="flex items-center gap-2"><input id="pb" type="checkbox" checked={proBonoOnly} onChange={(e) => setProBonoOnly(e.target.checked)} className="h-4 w-4 rounded border-slate-300" /><label htmlFor="pb" className="text-sm text-slate-700">{t.labels.proBonoOnly}</label></div>
              </div>
              <div className="mt-5 grid gap-4 lg:grid-cols-3">
                <div className="lg:col-span-2 space-y-3">
                  {results.length === 0 ? (
                    <Card><div className="p-4 text-sm text-slate-600">{t.labels.noResults}</div></Card>
                  ) : results.map((r) => (
                    <Card key={r.id}><div className="p-4 sm:p-5"><div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2"><div><h4 className="font-semibold text-slate-900">{r.name}</h4><p className="text-sm text-slate-600">{r.address}</p><div className="mt-2 flex flex-wrap gap-2">{r.categories.map((c) => <Badge key={c}>{CATEGORY_LABELS[(SUPPORTED_LANGS.includes(lang) ? lang : 'es')][c] || c}</Badge>)}{r.pro_bono ? <Badge>Pro bono</Badge> : null}<Badge>Es/En</Badge></div></div><div className="flex gap-2"><CTAButton href={`tel:${r.phone}`}>{t.labels.call}</CTAButton><CTAButton href={r.website} variant="secondary">{t.labels.website}</CTAButton></div></div></div></Card>
                  ))}
                </div>
                <div className="rounded-xl border border-slate-200 bg-slate-50 p-3">
                  <div className="aspect-[4/3] w-full rounded-lg bg-[linear-gradient(45deg,#e2e8f0,#cbd5e1)] flex items-center justify-center text-slate-600 text-sm">{t.labels.mapPlaceholder}</div>
                  <p className="mt-2 text-xs text-slate-600">{t.labels.mapNote}</p>
                </div>
              </div>
            </div>
          </Section>
        );
      }
      function MutualAidSection() {
        const { lang } = useI18n(); const t = safeCopy(lang);
        const [zip, setZip] = useState("");
        const centers = useMemo(() => MOCK_AID.filter((c) => (zip ? c.zip.startsWith(zip) : true)), [zip]);
        return (
          <Section id="mutual" title={t.sections.mutualTitle} subtitle={t.sections.mutualSub}>
            <div className="grid gap-4 lg:grid-cols-3">
              <div className="lg:col-span-2 rounded-2xl border border-slate-200 bg-white overflow-hidden">
                <MultiSrcImg
                  sources={[
                    "https://images.unsplash.com/photo-1604909053191-8a9d70e5bc24?q=80&w=1200&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1506617420156-8e4536971650?q=80&w=1200&auto=format&fit=crop",
                    "https://upload.wikimedia.org/wikipedia/commons/4/4b/Food_pantry_shelves.jpg",
                    MUTUAL_SHELVES_SVG
                  ]}
                  className="aspect-[16/10] w-full object-cover"
                  alt="Food pantry shelves"
                />
                <p className="mt-2 text-xs text-slate-600">{t.labels.mapNote}</p>
              </div>
              <div className="space-y-3">
                <Card><div className="p-4"><label className="text-sm text-slate-700 block mb-1">{t.labels.zipcode}</label><input value={zip} onChange={(e) => setZip(e.target.value)} inputMode="numeric" placeholder="303" className="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm" /></div></Card>
                {centers.map((c) => (
                  <Card key={c.id}><div className="p-4"><h4 className="font-semibold text-slate-900">{c.name[lang] || c.name["es"]}</h4><p className="text-sm text-slate-600">{c.type[lang] || c.type["es"]} • {c.address}</p><div className="mt-2 flex gap-2"><CTAButton href={`tel:${c.phone}`}>{t.labels.call}</CTAButton></div></div></Card>
                ))}
              </div>
            </div>
          </Section>
        );
      }
      function EducationalSection() {
        const { lang } = useI18n(); const t = safeCopy(lang);
        const topics = [
          { id: 'trabajo', label: lang === 'es' ? 'Trabajo' : 'Work' },
          { id: 'salud', label: lang === 'es' ? 'Salud' : 'Health' },
          { id: 'escuela', label: lang === 'es' ? 'Escuela' : 'School' },
          { id: 'vivienda', label: lang === 'es' ? 'Vivienda' : 'Housing' }
        ];
        const [active, setActive] = useState('trabajo');
        const vids = useMemo(() => MOCK_VIDEOS_EDU.filter(v => v.topic === active), [active]);
        return (
          <Section id="edu" title={t.sections.eduTitle} subtitle={t.sections.eduSub}>
            <div className="flex flex-wrap gap-2 mb-4">{topics.map(tk => <Pill key={tk.id} active={active === tk.id} onClick={() => setActive(tk.id)}>{tk.label}</Pill>)}</div>
            <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
              {vids.length === 0 ? (
                <Card><div className="p-4 text-sm text-slate-600">{lang === 'es' ? 'No hay videos en este tema (demo).' : 'No videos for this topic (demo).'}</div></Card>
              ) : vids.map(v => <VideoCard key={v.id} v={v} />)}
            </div>
            <div className="mt-6"><Card><div className="p-4 sm:p-5"><h4 className="font-semibold text-slate-900">{t.labels.downloads}</h4><p className="mt-1 text-sm text-slate-700">{lang === 'es' ? 'Listas de verificación y glosarios sencillos.' : 'Simple checklists and glossaries.'}</p><div className="mt-3 flex flex-wrap gap-2"><CTAButton href="#">{t.labels.checklist}</CTAButton><CTAButton href="#" variant="secondary">{t.labels.glossary}</CTAButton></div></div></Card></div>
          </Section>
        );
      }

      function Footer() {
        const { lang } = useI18n(); const t = safeCopy(lang);
        return (
          <footer className="border-t border-slate-200 bg-white">
            <div className="mx-auto max-w-6xl px-4 py-8 text-sm text-slate-600">
              <div className="flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between">
                <p>© {new Date().getFullYear()} {t.brand}. {lang === 'es' ? 'Información educativa; no es asesoría legal.' : 'Educational information; not legal advice.'}</p>
                <div className="flex gap-4">
                  <a className="hover:text-slate-900" href="#kyr">{t.nav.derechos}</a>
                  {/* updated: link to separate finder page */}
                  <a className="hover:text-slate-900" href="/finder.html">{t.nav.buscador}</a>
                  <a className="hover:text-slate-900" href="#mutual">{t.nav.red}</a>
                  <a className="hover:text-slate-900" href="#edu">{t.nav.edu}</a>
                </div>
              </div>
            </div>
          </footer>
        );
      }

      function App() {
        const [lang, setLang] = useState("es");
        const [chatOpen, setChatOpen] = useState(false);
        return (
          <LangCtx.Provider value={{ lang, setLang }}>
            <main className="min-h-screen bg-white text-slate-900">
              <Header />
              <Hero />
              <PillarCards />
              <KYRSection />
              <FinderSection />
              <MutualAidSection />
              <EducationalSection />
              <Footer />
              <ChatToggleButton onClick={() => setChatOpen(true)} />
              <ChatWidget open={chatOpen} onClose={() => setChatOpen(false)} />
            </main>
          </LangCtx.Provider>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
